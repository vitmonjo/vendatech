<div class="admin-container">
  <div class="admin-header">
    <h1>üõ†Ô∏è Painel Administrativo - VendaTech</h1>
    <p>Gerencie os produtos da sua loja</p>
  </div>

  <div class="admin-content">
    <!-- Formul√°rio de Produto -->
    <mat-card class="product-form-card">
      <mat-card-header>
        <mat-card-title>
          {{ isEditing ? '‚úèÔ∏è Editar Produto' : '‚ûï Adicionar Novo Produto' }}
        </mat-card-title>
      </mat-card-header>
      
      <mat-card-content>
        <form [formGroup]="productForm" (ngSubmit)="onSubmit()" class="product-form">
          <div class="form-row">
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>Nome do Produto</mat-label>
              <input matInput formControlName="name" placeholder="Ex: Smartphone Samsung Galaxy A55">
              <mat-error *ngIf="productForm.get('name')?.hasError('required')">
                Nome √© obrigat√≥rio
              </mat-error>
              <mat-error *ngIf="productForm.get('name')?.hasError('minlength')">
                Nome deve ter pelo menos 2 caracteres
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="form-field">
              <mat-label>Pre√ßo</mat-label>
              <input matInput type="number" formControlName="price" placeholder="0.00">
              <span matPrefix>R$&nbsp;</span>
              <mat-error *ngIf="productForm.get('price')?.hasError('required')">
                Pre√ßo √© obrigat√≥rio
              </mat-error>
              <mat-error *ngIf="productForm.get('price')?.hasError('min')">
                Pre√ßo deve ser maior que zero
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-row">
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>Categoria</mat-label>
              <mat-select formControlName="category">
                <mat-option *ngFor="let category of categories" [value]="category">
                  {{ category | titlecase }}
                </mat-option>
              </mat-select>
              <mat-error *ngIf="productForm.get('category')?.hasError('required')">
                Categoria √© obrigat√≥ria
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="form-field">
              <mat-label>Estoque</mat-label>
              <input matInput type="number" formControlName="stock" placeholder="0">
              <mat-error *ngIf="productForm.get('stock')?.hasError('required')">
                Estoque √© obrigat√≥rio
              </mat-error>
              <mat-error *ngIf="productForm.get('stock')?.hasError('min')">
                Estoque n√£o pode ser negativo
              </mat-error>
            </mat-form-field>
          </div>

          <mat-form-field appearance="outline" class="form-field full-width">
            <mat-label>URL da Imagem</mat-label>
            <input matInput formControlName="image" placeholder="https://exemplo.com/imagem.jpg">
            <mat-error *ngIf="productForm.get('image')?.hasError('required')">
              URL da imagem √© obrigat√≥ria
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="form-field full-width">
            <mat-label>Descri√ß√£o</mat-label>
            <textarea matInput formControlName="description" rows="3" 
              placeholder="Descreva o produto em detalhes..."></textarea>
            <mat-error *ngIf="productForm.get('description')?.hasError('required')">
              Descri√ß√£o √© obrigat√≥ria
            </mat-error>
            <mat-error *ngIf="productForm.get('description')?.hasError('minlength')">
              Descri√ß√£o deve ter pelo menos 10 caracteres
            </mat-error>
          </mat-form-field>

          <div class="form-actions">
            <button mat-raised-button type="button" (click)="cancelEdit()" 
              [disabled]="isLoading" color="warn">
              <mat-icon>close</mat-icon>
              Cancelar
            </button>
            
            <button mat-raised-button type="submit" 
              [disabled]="productForm.invalid || isLoading" color="primary">
              <mat-icon>{{ isEditing ? 'save' : 'add' }}</mat-icon>
              {{ isEditing ? 'Atualizar' : 'Criar' }} Produto
            </button>
          </div>
        </form>
      </mat-card-content>
    </mat-card>

    <!-- Lista de Produtos -->
    <mat-card class="products-list-card">
      <mat-card-header>
        <mat-card-title>üì¶ Produtos Cadastrados ({{ products.length }})</mat-card-title>
      </mat-card-header>
      
      <mat-card-content>
        <div *ngIf="isLoading" class="loading">
          <mat-icon>refresh</mat-icon>
          Carregando produtos...
        </div>

        <div *ngIf="!isLoading && products.length === 0" class="empty-state">
          <mat-icon>inventory_2</mat-icon>
          <p>Nenhum produto cadastrado ainda.</p>
          <p>Adicione seu primeiro produto usando o formul√°rio acima!</p>
        </div>

        <div *ngIf="!isLoading && products.length > 0" class="table-container">
          <table mat-table [dataSource]="products" class="products-table">
            <!-- Nome -->
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef>Nome</th>
              <td mat-cell *matCellDef="let product">
                <div class="product-info">
                  <img [src]="product.image" [alt]="product.name" class="product-image">
                  <span class="product-name">{{ product.name }}</span>
                </div>
              </td>
            </ng-container>

            <!-- Pre√ßo -->
            <ng-container matColumnDef="price">
              <th mat-header-cell *matHeaderCellDef>Pre√ßo</th>
              <td mat-cell *matCellDef="let product">
                <span class="price">R$ {{ product.price | number:'1.2-2' }}</span>
              </td>
            </ng-container>

            <!-- Categoria -->
            <ng-container matColumnDef="category">
              <th mat-header-cell *matHeaderCellDef>Categoria</th>
              <td mat-cell *matCellDef="let product">
                <span class="category-badge">{{ product.category | titlecase }}</span>
              </td>
            </ng-container>

            <!-- Estoque -->
            <ng-container matColumnDef="stock">
              <th mat-header-cell *matHeaderCellDef>Estoque</th>
              <td mat-cell *matCellDef="let product">
                <span [class]="product.stock > 0 ? 'stock-available' : 'stock-empty'">
                  {{ product.stock }} unidades
                </span>
              </td>
            </ng-container>

            <!-- A√ß√µes -->
            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef>A√ß√µes</th>
              <td mat-cell *matCellDef="let product">
                <button mat-icon-button (click)="editProduct(product)" color="primary" 
                  matTooltip="Editar produto">
                  <mat-icon>edit</mat-icon>
                </button>
                <button mat-icon-button (click)="deleteProduct(product)" color="warn"
                  matTooltip="Deletar produto">
                  <mat-icon>delete</mat-icon>
                </button>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
